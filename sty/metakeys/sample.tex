%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Prototype for \addmetakey:												   %
% 	\addmetakey[<default value 1>]{<group name>}{<key name>}[<default value 2>]%	
%		default value 1: when the key is initialized.						   %
%		default value 2: when the key is given, but no value for this key.     % 	
%		Please see the example below.										   %
%		A macro \<group name>@<key name> with be defined.					   %
%																			   %			
% Prototype for \metasetkey:												   %	
%	\metasetkey{<group name>}{key1=value1, key2=value2, ...}				   %	
%   Values will be set through this command sequence.						   %	
%																			   %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\documentclass{article}
\usepackage{metakeys}
\makeatletter
\def\@true{true}
\def\@false{false}
\addmetakey[0]{group}{id}[1]% \group@id will be defined, with the value 0.
\addmetakey[true]{group}{visible}% \group@visible will be defined, with the value "true".
%
\newcommand{\test}[1][]{%
	\metasetkeys{group}{#1}% values will be set
	visible: \texttt{\group@visible}\newline%
	id: \texttt{\group@id}\newline%
%
	\ifx\group@visible\@true% if visible
		\metasetkeys{group}{visible=false, id=100}%
	\fi%
%
	\ifx\group@visible\@true%
		Won't be seen!%
	\else%
		id: \texttt{\group@id} \newline%
	\fi%
}
\makeatother
\begin{document}
\noindent\test[id=2]

\noindent\test[id]% id is passed, but without value, so id will be 1
\end{document}