\documentclass[mh]{smglom}
\libinput{preamble}
\begin{document}
\begin{modsig}[creators=miko]{ratarith}
\gimport{rationalnumbers}

\symdef[noverb,name=uminus]{ratuminusOp}{\mathop{-}}
\symdef[noverb,name=uminus]{ratuminus}[1]{\mixfixi[p=300]{\ratuminusOp}({#1})}
\symtest{uminus}{\ratuminus{3}}

\symdef[name=absolute-value]{ratabsval}[1]{\left|#1\right|}
\symtest{ratabsval}{\ratabsval{r}}

\symdef[name=addition]{ratplusOp}{\mathop{+}}
\symdef[assocarg=1,name=addition]{ratplus}[1]{\assoc[p=500]{\ratplusOp}{#1}}
\symtest{ratplus}{\ratplus{a,b,3}}

\symdef[name=subtraction]{ratminusOp}{\mathop{-}}
\symdef[assocarg=1,name=subtraction]{ratminus}[1]{\assoc[p=550]{\ratminusOp}{#1}}
\symtest{ratminus}{\ratminus{a,b,3}}

\symdef[name=multiplication]{rattimesOp}{}
\symdef[assocarg=1,name=multiplication]{rattimes}[1]{\assoc[p=600]{\rattimesOp}{#1}}
\symtest{rattimes}{\rattimes{a,b,3}}

\symvariant{rattimesOp}{cdot}{\mathop\cdot}
\symvariant{rattimes}[1]{cdot}{\assoc[p=600]{\cdot}{#1}}
\symtest[variant=cdot]{rattimes}{\rattimes[cdot]{a,b,3}}

\symvariant{rattimesOp}{x}{\mathop\times}
\symvariant{rattimes}[1]{x}{\assoc[p=600]{\times}{#1}}
\symtest[variant=x]{rattimes}{\rattimes[x]{a,b,3}}

\symdef[name=division]{ratdivideOp}{\mathop{/}}
\symdef[name=division]{ratdivide}[2]{\infix[p=600]{\ratdivideOp}{#1}{#2}}
\symtest{ratdivide}{\ratdivide{n}2}
\symvariant{ratdivide}[2]{frac}{\frac{#1}{#2}}
\symtest[variant=frac]{ratdivide}{\ratdivide[frac]{a}b}

\symdef[name=exponentiation]{ratpower}[2]{\mixfixi[p=800,pi=700]{}{#1^{\withprecii\niprec #2}}{}}
\symtest{ratpower}{\ratpower{3}{4}=81}
\symvariant{ratpower}[2]{basebrack}{\mixfixi[p=800,pi=\niprec]{}{\left(#1\right)^{\withprecii\niprec #2}}{}}
\symtest[variant=basebrack]{ratpower}{\ratpower[basebrack]{-3}{4}=81}

\symdef[name=root]{ratroot}[2]{\sqrt[#1]{#2}}
\symtest{ratroot}{\ratroot37}

\symdef[name=square-root]{ratsqrt}[1]{\sqrt{#1}}
\symtest{ratsqrt}{\ratsqrt{7}}

\symdef[noverb,name=morethan]{ratmorethanOp}{\mathord{>}}
\symdef[noverb,name=morethan]{ratmorethan}[2]{\infix[p=300]\ratmorethanOp{#1}{#2}}
\symtest{ratmorethan}{\ratmorethan12}
\symdef[noverb,name=mmorethan,assocarg=1]{ratmmorethan}[2]{\mixfixai[p=300]{}{#1}\ratmorethanOp{#2}{}{,}}
\symtest{ratmmorethan}{\ratmmorethan{1,2}2}

\symdef[noverb,name=lessthan]{ratlessthanOp}{\mathord{<}}
\symdef[noverb,name=lessthan]{ratlessthan}[2]{\infix[p=300]\ratlessthanOp{#1}{#2}}
\symtest{ratlessthan}{\ratlessthan12}
\symvariant{ratlessthanOp}{z}{{\ratlessthanOp_{\RationalNumbers}}}
\symvariant{ratlessthan}[2]{z}{\infix[p=300]{\ratlessthanOp[z]}{#1}{#2}}
\symtest[variant=z]{ratlessthan}{\ratlessthan[z]12}

\symdef[noverb,name=mlessthan,assocarg=1]{ratmlessthan}[2]{\mixfixai[p=300]{}{#1}\ratlessthanOp{#2}{}{,}}
\symtest{ratmlessthan}{\ratmlessthan{1,2}2}

\symdef[noverb,name=methan]{ratmethanOp}{\mathord\geq}
\symdef[noverb,name=methan]{ratmethan}[2]{\infix[p=300]\ratmethanOp{#1}{#2}}
\symtest{ratmethan}{\ratmethan12}
\symdef[noverb,name=mmethan,assocarg=1]{ratmmethan}[2]{\mixfixai[p=300]{}{#1}\ratmethanOp{#2}{}{,}}
\symtest{ratmmethan}{\ratmmethan{1,2}2}

\symdef[noverb,name=lethan]{ratlethanOp}{\mathord\leq}
\symdef[noverb,name=lethan]{ratlethan}[2]{\infix[p=300]\ratlethanOp{#1}{#2}}
\symtest{ratlethan}{\ratlethan12}
\symdef[noverb,name=mlethan,assocarg=1]{ratmlethan}[2]{\mixfixai[p=300]{}{#1}\ratlethanOp{#2}{}{,}}
\symtest{ratmlethan}{\ratmlethan{1,2}2}

\abbrdef{ratbetweenss}[3]{\pobetween{#2}\ratlessthanOp{#1}\ratlessthanOp{#3}}
\abbrtest{ratbetweenss}{\ratbetweenss{i,j}13}
\abbrdef{ratbetweense}[3]{\pobetween{#2}\ratlessthanOp{#1}\ratlethanOp{#3}}
\abbrtest{ratbetweense}{\ratbetweense{i,j}13}
\abbrdef{ratbetweenes}[3]{\pobetween{#2}\ratlethanOp{#1}\ratlessthanOp{#3}}
\abbrtest{ratbetweenes}{\ratbetweenes{i,j}13}
\abbrdef{ratbetweenee}[3]{\pobetween{#2}\ratlethanOp{#1}\ratlethanOp{#3}}
\abbrtest{ratbetweenee}{\ratbetweenee{i,j}13}

\symi{sum}
\symi{product}
\symi{difference}
\symi{quotient}
\symi{base}
\symi{power}
\symi{exponent}
\end{modsig}
\end{document}
